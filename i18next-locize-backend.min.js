(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.i18nextLocizeBackend = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ajax(e,t,n,i,o){if(i&&"object"===("undefined"==typeof i?"undefined":_typeof(i))){var r="",s=encodeURIComponent;for(var a in i)r+="&"+s(a)+"="+s(i[a]);i=r.slice(1)+(o?"":"&_t="+new Date)}try{var u=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");u.open(i?"POST":"GET",e,1),t.crossDomain||u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.onreadystatechange=function(){u.readyState>3&&n&&n(u.responseText,u)},u.send(i)}catch(s){window.console&&console.log(s)}}function getDefaults(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",crossDomain:!0,version:"latest"}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_utils=require("./utils"),utils=_interopRequireWildcard(_utils),Backend=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];_classCallCheck(this,e),this.init(t,n),this.type="backend"}return _createClass(e,[{key:"init",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.services=e,this.options=_extends({},getDefaults(),this.options,t),this.queuedWrites={},this.debouncedWrite=utils.debounce(this.write,1e4)}},{key:"read",value:function(e,t,n){var i=this.services.interpolator.interpolate(this.options.loadPath,{lng:e,ns:t,projectId:this.options.projectId,version:this.options.version});this.loadUrl(i,n)}},{key:"loadUrl",value:function(e,t){ajax(e,this.options,function(n,i){var o=i.status.toString();if(0===o.indexOf("5"))return t("failed loading "+e,!0);if(0===o.indexOf("4"))return t("failed loading "+e,!1);var r=void 0,s=void 0;try{r=JSON.parse(n)}catch(a){s="failed parsing "+e+" to json"}return s?t(s,!1):void t(null,r)})}},{key:"create",value:function(e,t,n,i,o){var r=this,s=arguments;o||(o=function(){}),"string"==typeof e&&(e=[e]),e.forEach(function(e){r.queue.apply(r,s)})}},{key:"write",value:function(e,t){var n=this,i=utils.getPath(this.queuedWrites,["locks",e,t]);if(!i){var o=this.services.interpolator.interpolate(this.options.addPath,{lng:e,ns:t,projectId:this.options.projectId,version:this.options.version}),r=utils.getPath(this.queuedWrites,[e,t]);utils.setPath(this.queuedWrites,[e,t],[]),r.length&&(utils.setPath(this.queuedWrites,["locks",e,t],!0),ajax(o,this.options,function(i,o){utils.setPath(n.queuedWrites,["locks",e,t],!1),r.forEach(function(e){e.callback&&e.callback()}),n.debouncedWrite(e,t)},payload))}}},{key:"queue",value:function(e,t,n,i,o){utils.pushPath(this.queuedWrites,[e,t],{key:n,fallbackValue:i||"",callback:o}),this.debouncedWrite(e,t)}}]),e}();Backend.type="backend",exports["default"]=Backend;

},{"./utils":2}],2:[function(require,module,exports){
"use strict";function debounce(t,e,n){var a;return function(){var o=this,r=arguments,u=function(){a=null,n||t.apply(o,r)},s=n&&!a;clearTimeout(a),a=setTimeout(u,e),s&&t.apply(o,r)}}function getLastOfPath(t,e,n){function a(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}for(var o="string"!=typeof e?[].concat(e):e.split(".");o.length>1;){if(!t)return{};var r=a(o.shift());!t[r]&&n&&(t[r]=new n),t=t[r]}return t?{obj:t,k:a(o.shift())}:{}}function setPath(t,e,n){var a=getLastOfPath(t,e,Object),o=a.obj,r=a.k;o[r]=n}function pushPath(t,e,n,a){var o=getLastOfPath(t,e,Object),r=o.obj,u=o.k;r[u]=r[u]||[],a&&(r[u]=r[u].concat(n)),a||r[u].push(n)}function getPath(t,e){var n=getLastOfPath(t,e),a=n.obj,o=n.k;return a?a[o]:void 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.debounce=debounce,exports.setPath=setPath,exports.pushPath=pushPath,exports.getPath=getPath;

},{}]},{},[1])(1)
});